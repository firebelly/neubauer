{# actionItem: 
    See styles/components/_actions.scss for styling

    @cardName {str}  - base styling hook
    @cardEntry {obj} - entry object
#}
{% macro cardArticle(cardName,cardEntry,cardVariant = null) %}
{% set arrowPath = "/spritemap.svg#icon-arrow-right-20" %}
{% set entrySection = cardEntry.section|lower %}


<article class="{{ cardName }}" data-section="{{ entrySection }}">

    {% if cardEntry.cardImage and cardEntry.cardImage.one() is not null %}
    <img 
        class="{{ cardName }}-img"
        src="" />
    {% else %}
    <div class="{{ cardName }}-placeholder"></div>
    {% endif %}

    <h3 class="{{ cardName }}-title">{{ cardEntry.title }}</h3>

    {% if cardEntry.personTitle %}
    <p class="{{ cardName }}-caption">{{ cardEntry.personTitle }}</p>
    {% endif %}

    {% if cardEntry.projectTeam|length %}
    <ul class="{{ cardName }}-team">
    {% for person in cardEntry.projectTeam %}
        <li class="{{ cardName }}-team-item">
            <a 
                class="{{ cardName }}-caption"
                href="#">
                {{ person }}
            </a>
            {% if loop.length > 1 and not loop.last %}&#44;{% endif %}
        </li>
    {% endfor %}
    </ul>
    {% endif %}

    {% if cardEntry.dateBlock|length %}
    {% set dateBlock, dateKeys = cardEntry.dateBlock[0], cardEntry.dateBlock[0]|keys %}
    
    {% set hasDateRange = ( dateBlock.item is defined and dateBlock.item is not null and dateBlock.item.start is defined and dateBlock.item.end is defined) and (dateBlock.item.start != '' and dateBlock.item.end != '') %}
    {% set hasYearRange = (dateBlock.itemFrom is defined and dateBlock.itemTo is defined) and (dateBlock.itemFrom != '' and dateBlock.itemTo != '') %}
    {% set hasSingleDate = (not hasDateRange and not hasYearRange and dateBlock.item != '') %}

    {% if hasSingleDate or hasDateRange or hasYearRange %}
    {% set date_format, time_format = 'm.d.Y', 'H:i A' %}
    <time 
        class="{{ cardName }}-dateblock"
        datetime="">
        {# Year Range #}
        {% if hasYearRange %}
        <span>{{ dateBlock.itemFrom }} &ndash; {{ dateBlock.itemTo }}</span>
        {% else %}
        {# Date/Time Range #}
        {% if hasDateRange %}
        {% set startDate, endDate = dateBlock.item.start, dateBlock.item.end %}

        <span>{{ startDate|date(date_format) }} &ndash; {{ endDate|date(date_format) }}</span>

        {# Single Date/Time #}
        {% elseif hasSingleDate %} 
        {% set hasTime = dateBlock.item|date('H:i') != '00:00' %}
        <span>{{ dateBlock.item|date(date_format) }}</span>
        
        {% if hasTime %}
        <span class="{{ cardName }}-time">{{ dateBlock.item|date(time_format) }}</span>
        {% endif %}

        {% endif %}
        {% endif %}
    </time>
    {% endif %}
    {% endif %}

    {% if cardEntry.topicList|length %}
    <ul class="{{ cardName }}-list">
    {% for tag in cardEntry.topicList %}
        <li class="{{ cardName }}-item">
            <a 
                class="{{ cardName }}-trigger {{ cardName }}-trigger--tag"
                href="#">
                <span class="{{ cardName }}-label {{ cardName }}-label--tag">{{ tag }}</span>
            </a>
        </li>
    {% endfor %}
    </ul>
    {% endif %}

    <a 
        class="{{ cardName }}-action"
        href="{{ cardEntry.url }}"
        title=""
        role="">
        <span class="{{ cardName }}-action-label">Learn More</span>
        <svg class="{{ cardName }}-action-icon">
            <use xlink:href="{{ alias('@assetBasePath' ~ arrowPath) }}"></use>
        </svg>
    </a>
</article>
{% endmacro %}
